{% extends "layout.html" %}

{% macro render_comment(comment) %}
  <article class="comment">
    <h4>{{ comment.title }}</h4>
    <p class="info">{{ comment.created_at }} &middot; {{ comment.username }}</p>
    <div class="body">
      {{ comment.body }}
    </div>
  </article>
{% endmacro %}

{% block title %}{{ hearing.title }}{% endblock %}

{% block content %}
  <article class="hearing">
    <header>
      <ul class="tags">
        <li>Opetus ja koulutus</li>
        <li>Kaavoitus</li>
        <li>Pikku-huopalahti</li>
      </ul>
      <h1>{{ hearing.title }}</h1>
    </header>

    <aside>
      Sisällys
    </aside>

    <div class="content">
      <figure>
        <img src="../static/images/ph1920.jpg" alt="">
        <figcaption>Kuva 1. Asemapiirros. Kuva: Arkkitehtitoimisto AJAK.</figcaption>
      </figure>
      <section class="main-content">
        <div class="entry">
          <p class="lead">{{ hearing.lead }}</p>
          {{ hearing.body|safe }}
        </div>
        <aside>
          Kerro mielipiteesi
        </aside>
      </section>
      {% if hearing.alternatives %}
        <section class="alternatives">
          <h2>Vaihtoehdot</h2>
          {% for alternative in hearing.alternatives %}
            <article class="alternative">
              <section class="summary">
                <figure>
                  <span class="option">&#{{ loop.index + 64 }};</span>
                  <img src="../static/images/ph1920.jpg" alt="">
                </figure>
                <div class="entry">
                  <h3>{{ alternative.title }}</h3>
                  <p>{{ alternative.lead }}</p>
                </div>
                <a data-toggle="collapse" data-parent=".alternatives" href="#alternative-{{ alternative.id }}" class="collapser">
                  <span>\/</span>
                </a>
              </section>
              <div class="collapse" id="alternative-{{ alternative.id }}">
                <figure>
                  <img src="../static/images/ph1920.jpg" alt="">
                  <figcaption>Kuva 1. Asemapiirros. Kuva: Arkkitehtitoimisto AJAK.</figcaption>
                </figure>
                <section class="main-content">
                  <a data-toggle="collapse" data-parent=".alternatives" href="#alternative-{{ alternative.id }}" class="collapser">
                    <span>/\</span>
                  </a>
                  <div class="entry">
                    <h3>{{ alternative.title }}</h3>
                    <p class="lead">{{ alternative.lead }}</p>
                    <p>{{ alternative.body }}</p>
                  </div>
                  <aside>
                    Kerro mielipiteesi
                  </aside>
                </section>
              </div>
            </article>
          {% endfor %}
        </section>
      {% endif %}

      <section class="comments">
        <header>
          <h2>Kommentit</h2>
          <p>
            Kuulemisen tavoitteena on taata kuntalaisille mahdollisuus vaikuttaa käsiteltäviin asioihin koko valmistelutyön ajan. Asioiden kommentointi onnistuu myös ilman tunnuksia. Klikkaa nappia ja jätä ensimmäinen kommenttisi!
          </p>
        </header>
        <section class="latest-comments">
          <h3>Uusimmat kommentit</h3>
          {% for comment in latest_comments %}
            {{ render_comment(comment) }}
          {% endfor %}
        </section>
        <section class="popular-comments">
          <h3>Suosituimmat kommentit</h3>
          {% for comment in popular_comments %}
            {{ render_comment(comment) }}
          {% endfor %}
        </section>
      </section>
    </div>
  </article>
{% endblock %}
