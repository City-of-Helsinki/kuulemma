{% from "_hearing_helpers.html" import render_hearing_list_item %}
{% extends "layout.html" %}

{% block title_base %}Kerrokantasi{% endblock %}
{% block body_classes %}frontpage{% endblock %}
{% block content %}
  <div class="home-page">
    {% if featured_hearing %}
      <section class="featured-hearing">
        <a href="{{ url_for('hearing.show', slug=featured_hearing.slug) }}">
          <figure>
            <figcaption>
              <i class="fa fa-exclamation-circle"></i>
              Puhuttava asia
            </figcaption>
            <img src="{{ url_for('static', filename=featured_hearing.main_image.filename) }}" alt="{{ featured_hearing.main_image.caption }}">
          </figure>
        </a>
        <ul class="tags small">
          <li class="tag-traffic">Liikenne</li>
          <li class="tag-area">Kallio</li>
          <li class="tag-area">Sörnäinen</li>
        </ul>
        <div class="info">
          <div class="days-open">
            <i class="fa fa-clock-o"></i>
            {{ featured_hearing.days_open }} pv.
          </div>
          <div class="comments">
            <i class="fa fa-comment-o"></i>
            {{ featured_hearing.comment_count }} kpl.
          </div>
        </div>
        <h2>
          <a href="{{ url_for('hearing.show', slug=featured_hearing.slug) }}">
            {{ featured_hearing.title }}
          </a>
        </h2>
      </section>
    {% endif %}

    <section class="side-boxes">
      <div feedback-adder size="big"></div>
    </section>

    <section class="latest-hearings">
      <h2>Uusimmat kuulemiset ja yhteenvetoraportit</h2>
      <ul class="hearing-list">
      {% for hearing in latest_hearings %}
        {{ render_hearing_list_item(hearing) }}
      {% else %}
        <li class="empty-message">Palvelussa ei ole vielä yhtään kuulemista.</li>
      {% endfor %}
      </ul>
    </section>
  </div>
{% endblock %}
